# Модуль "Кастомный провайдер правил работы с корзиной"
Переопределяет логику применения правил работы с корзиной. Если ранее скидки выстраивались по приоритету и применялись по очереди на всю корзину целиком, то теперь скидки сортируются для каждого товара по стоимости скидки и применяются на каждый товар в отдельности.

## Пример

Допустим, в интернет магазине задано два правила:

   * применить скидку 50% к товарам, для которых все условия выполнены
    
   * применить скидку 60 рублей на каждый товар, для которых все условия выполнены

И в корзине лежат два товара: стоимостью 100 и 200 рублей.

Стандартный функционал Битрикс применит скидку с наибольшим приоритетом применимости. Если на нем не будет галочки "Прекратить дальнейшее применение правил", то сработает и вторая скидка.
При этом скидка работает на всю корзину целиком (если товары соответствуют указанным условиям).

Данный модуль меняет эту логику, рассчитывая выгодность каждой из скидок по отдельности для каждой позиции в корзине. 

Так, например, на товар за 100 рублей выгоднее применить скидку 60 рублей, а на товар за 200 рублей - скидку 50%.


_Расчетный размер скидок для товаров_

| Стоимость товара \ Скидка | 50%      | 60 руб.  |
|---------------------------|----------|----------|
| 100 руб.                  | 50 руб.  | **40 руб.**  |
| 200 руб.                  | **100 руб.** | 140 руб. |